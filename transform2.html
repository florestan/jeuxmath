<!DOCTYPE html>
<html>
	<style>
canvas {
	border:1px solid #d3d3d3;
	background-color: #f1f1f1;
}
#win {
	font-size:30px;
	color:red;
}
	</style>
	<head>
	</head>
	<body onload="startGame()">
		<script>

			var myGamePiece;
function startGame() {
	line = new componentVertLine(5, "black", 400);
	box = new component(30, 30, "red", 10, 100);
	box2 = new component(30, 30, "blue", 800-40, 100);
	zone = {'x':800-100, 'y':200, 'w':50, 'h':50};
	box3 = new component(zone.w, zone.h, "gray", zone.x, zone.y);
	joinline = new joinLine(5, "green", box, box2)
	myGameArea.start();
	updateGameArea();
}

var myGameArea = {
	canvas : document.createElement("canvas"),
	start : function() {
		this.canvas.width = 800;
		this.canvas.height = 500;
		this.canvas.style.cursor = "none"; //hide the original cursor
		this.context = this.canvas.getContext("2d");
		document.body.insertBefore(this.canvas, document.body.childNodes[0]);
		<!-- this.interval = setInterval(updateGameArea, 20); -->
		window.addEventListener('mousemove', function (e) {
			[box.x, box.y] = [e.pageX, e.pageY];
			[box2.x, box2.y] = sym(line.x, box.x, box.y);
			if (check_in_zone(box2.o(), box3.o())) {
				document.getElementById("win").textContent="Bravo!";
			}
			else {
				document.getElementById("win").textContent="pas bravo...";
			};
			updateGameArea()

		})
	}, 
	clear : function(){
		this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
	}
}
function component(width, height, color, x, y) {
	this.width = width;
	this.height = height;
	this.x = x;
	this.y = y;    
	this.update = function() {
		ctx = myGameArea.context;
		ctx.fillStyle = color;
		ctx.fillRect(this.x, this.y, this.width, this.height);
	}
	this.o = function () {
		return {'x':this.x, 'y':this.y, 'w':this.width, 'h':this.height}
		;
	}
}

function joinLine(height, color, b1, b2) {
	this.b1 = b1
	this.b2 = b2
	this.update = function() {
		ctx = myGameArea.context;
		ctx.fillStyle = color;
		[startx, starty] = middle(b1.o());
		[endx, endy] = middle(b2.o());
		ctx.fillRect(startx, starty-height/2, endx-startx, endy-starty+height/2);
	}
}

function componentVertLine(width, color, x) {
	this.width = width;
	this.x = x;
	this.update = function() {
		ctx = myGameArea.context;
		ctx.fillStyle = color;
		ctx.fillRect(this.x, 0, this.width, myGameArea.canvas.height);
	}
}

function sym(w, x, y) {
	sym_x = x + 2*(w-x);
	return [sym_x, y];
}

function check_in_zone(o, zone) {
	is_in = (zone.x <= o.x )
		&&(zone.y <= o.y )	
		&&(zone.x+zone.w >= o.x+o.w )	
		&&(zone.y+zone.h >= o.y+o.h )	
	;
	return is_in;
}
function middle(o) {
	x = o.x + o.h/2;
	y = o.y + o.w/2;
	return [x,y];
};


function updateGameArea() {
	myGameArea.clear();
	line.update();
	joinline.update();
	box.update();
	box3.update();
	box2.update();
}
		</script>

		<p>Mettre le truc bleu dans la zone grise !</p>
		<p id="win"></p>

	</body>
</html>
